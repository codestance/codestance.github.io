$(document).ready(function(){createCanvas(),flyAstronaut(),setInterval(shine,1e3),$(window).on("resize",createCanvas),$(window).on("resize",flyAstronaut)});let planet={y:$(".planet").offset().top,x:$(".planet").offset().left+$(".planet").width()/2};function setAstronaut(t){return $(".astronaut").css("top",t.y+"px"),$(".astronaut").css("left",t.x-$(".astronaut").width()/2+"px"),$(".astronaut").css("opacity",1),{y:$(".astronaut").offset().top,x:$(".astronaut").offset().left}}let astronaut=setAstronaut(planet),moon={y:$(".moon").offset().top+$(".moon").height()/2,x:$(".moon").offset().left+$(".moon").width()/2-$(".astronaut").width()/2},routeX=Math.abs(moon.x-astronaut.x),routeY=Math.abs(moon.y-astronaut.y);function flyAstronaut(){const t=astronaut.y+$(".astronaut").height();let a,o=0,n=t;$(window).on("scroll",function(){moon.y>n?(a=moon.y/routeY*$(window).scrollTop(),stepX=n/routeY*routeX,n=a+t,console.log("stepY: ",a,"stepX: ",stepX,"foot: ",n),$(".astronaut").css("transform","translate("+stepX+"px,"+a+"px) rotate("+o+"deg)"),o=n/routeY*360%360):$(".potential-typing").addClass("typing")})}console.log("astronaut: ",astronaut,"moon: ",moon);const canvas=$("<canvas></canvas>").addClass("canvas-stars").attr("aria-hidden","true");$(".home").append(canvas);const ctx=canvas[0].getContext("2d");function createCanvas(){ctx.fillRect(0,0,ctx.canvas.width,ctx.canvas.height),canvas[0].height=canvas[0].clientHeight,canvas[0].width=canvas[0].clientWidth;for(let t=0;t<120;t++)new Circle}const stars=[];function shine(){for(let t=0;t<3;t++){let t=stars[~~(Math.random()*stars.length)];ctx.beginPath(),ctx.globalCompositeOperation="destination-out",ctx.arc(t[0],t[1],t[2]+1,0,2*Math.PI),ctx.fill(),setTimeout(function(){ctx.beginPath(),ctx.globalCompositeOperation="source-over",ctx.fillStyle=t[3],ctx.arc(t[0],t[1],t[2],0,2*Math.PI),ctx.fill()},500)}}const Circle=function(){let t=window.innerHeight,a=window.innerWidth,o=Math.floor(2*Math.random())+2,n=Math.random()*(a-2*o)+o,e=Math.random()*(t-2*o)+o;ctx.beginPath(),ctx.fillStyle="rgb(255,255,255)",ctx.globalAlpha=.9,stars.push([n,e,o,"rgb(255,255,255)"]),ctx.arc(n,e,o,0,2*Math.PI),ctx.fill()};